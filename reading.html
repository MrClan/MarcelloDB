<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>MarcelloDB</title>

        <link rel="stylesheet" href="http://markmeeus.github.io/MarcelloDB/css/bootstrap.min.css">
        <link rel="stylesheet" href="http://markmeeus.github.io/MarcelloDB/css/font-awesome.min.css">
        <link rel="stylesheet" href="http://markmeeus.github.io/MarcelloDB/css/highlight.tomorrow-night.css">
        <link rel="stylesheet" href="http://markmeeus.github.io/MarcelloDB/css/main.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top" style='background:#FFF;height:60px;'>

            <a class="navbar-brand" href="http://markmeeus.github.io/MarcelloDB/" style="position:relative;top:-40px;">
                <img style="width:240px;" src="http://markmeeus.github.io/MarcelloDB/images/logo/logo_blue.svg">
                <small class="hidden-xs hidden-sm" style="position:relative;top:4px; color:#000; font-size:30px;">
                    NoSQL Data Storage for Xamarin and Windows Apps
                </small>
            </a>

                            <a href="https://github.com/markmeeus/marcellodb">
                    <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
                </a>
            
        </header>

        <main class="container-fluid">
            <div class="row">

                
                    <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">

                                                    <p class="text-muted">
                                Main documentation
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="http://markmeeus.github.io/MarcelloDB/">
                                            Home
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://markmeeus.github.io/MarcelloDB/quickstart.html">
                                            Quickstart Guide
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://markmeeus.github.io/MarcelloDB/sessions.html">
                                            Sessions, CollectionFiles and Collections
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://markmeeus.github.io/MarcelloDB/persisting.html">
                                            Persist and Destroy
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://markmeeus.github.io/MarcelloDB/reading.html">
                                            Find and Enumerate
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://markmeeus.github.io/MarcelloDB/indexes.html">
                                            Indexes
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://markmeeus.github.io/MarcelloDB/transactions.html">
                                            Transactions
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://markmeeus.github.io/MarcelloDB/encryption.html">
                                            Encryption
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://markmeeus.github.io/MarcelloDB/upgrade04.html">
                                            Upgrading to 0.4
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://markmeeus.github.io/MarcelloDB/upgrade05.html">
                                            Upgrading to 0.5
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://markmeeus.github.io/MarcelloDB/roadmap.html">
                                            Roadmap to 1.0
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://markmeeus.github.io/MarcelloDB/longterm.html">
                                            After 1.0
                                        </a>
                                    </li>
                                                            </ul>
                        
                    </nav>

                
                <section class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
                    <h2 id="finding-an-object">Finding an object</h2>
<p>MarcelloDB keeps track of all objects in a collection using it's ID. The ID's of a collection are stored in a BTree structure inside the same collection-file.</p>
<p>Finding an object by it's ID is very performant, even for very large collections.</p>
<pre><code class="language-cs">bookCollection.Find(123);</code></pre>
<p>The Find method uses the generic type for the ID as parameter. This way, the compiler will protect you from trivial type mistakes.</p>
<h2 id="enumerating-a-collection">Enumerating a collection</h2>
<p>Using the collections All property you can enumerate all objects in the collection.</p>
<pre><code class="language-cs">foreach(var book in bookCollection.All){}</code></pre>
<p>MarcelloDB loads only the current object in memory, so even for large collections, enumerating would be quite safe to do memory-wise.</p>
<blockquote>
<p>To avoid data corruption, enumerating a collection locks the collection for other threads write operations untill the enumeration is done.</p>
<p>MarcelloDB will throw an exception when the enumerating thread tries to write.</p>
</blockquote>
<h2 id="a-note-about-linq">A note about Linq</h2>
<p>Since All is an IEnumerable&lt;T&gt; (T is the type of your objects) you can use Linq on it.</p>
<p>However, there is no such thing as Linq-To-MarcelloDB. Some Linq expressions will still enumerate all objects. Which may be fine for a small collection.</p>
<p>For instance, to get all thrillers from a book collection, this will work enumerate all objects.
Which is fine for a small collection.</p>
<pre><code class="language-cs">var thrillers = bookCollection.All.Where(b =&gt; b.Category == Categories.Thriller);</code></pre>
<p>However if we use an index, we'll enumerate only the objects we actually want.
<a href="indexes.html">(More about indexes ...)</a></p>
<pre><code class="language-cs">var thrillers = bookCollection.Indexes.Category.Equals(Categories.Thriller);</code></pre>
<h3 id="why-no-linq-to-marcellodb">Why no Linq-To-MarcelloDB</h3>
<p>Linq-To-MarcelloDB would certainly be possible. The expression could be evaluated and when an index exists, it could be used.
However, the philosofy of MarcelloDB is to be always explicit, allowing the compiler to protect you as much as possible.
Using this expressive api, it is obvious that an index is used. No need for debugging here.</p>
                </section>

            </div>
        </main>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="//yandex.st/highlightjs/7.5/highlight.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                // Syntax highlighting
                hljs.initHighlightingOnLoad();
            });
        </script>
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-539759-16', 'auto');
          ga('send', 'pageview');

        </script>
    </body>
</html>
